(function(){var t=function(t,s){return function(){return t.apply(s,arguments)}},s=function(t,s){function n(){this.constructor=t}for(var i in s)r.call(s,i)&&(t[i]=s[i]);return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t},r={}.hasOwnProperty;this.Audiviz=function(){function t(t,s,r){this.canvas=document.querySelector(t),this.player=document.getElementById(s),this.style=r}return t.prototype.draw=function(){var t;switch(this.style){case"bars":t=new Bars(this.canvas,this.player);break;case"dots":t=new Dots(this.canvas,this.player);break;case"circle":t=new Circle(this.canvas,this.player)}return t.draw()},t.prototype.run=function(){return this.player.play(),this.draw()},t}(),this.Base=function(){function t(t,s,r,n){null==r&&(r="rgb(0, 0, 0)"),null==n&&(n="rgb(100, 50, 50)"),this.canvasCtx=t.getContext("2d"),this.background=r,this.foreground=n,this.WIDTH=t.width,this.HEIGHT=t.height,this.init(s)}return t.prototype.init=function(t){var s;return s=new(window.AudioContext||window.webkitAudioContext),this.analyser=s.createAnalyser(),this.analyser.fftSize=2048,this.analyser.connect(s.destination),this.source=s.createMediaElementSource(t),this.source.connect(this.analyser)},t.prototype.setBackground=function(){return this.canvasCtx.fillStyle=this.background,this.canvasCtx.fillRect(0,0,this.WIDTH,this.HEIGHT)},t.prototype.setAnimationFrame=function(){var t;return t=requestAnimationFrame(this.draw),this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteFrequencyData(this.dataArray)},t}(),this.Bars=function(r){function n(){return this.draw=t(this.draw,this),n.__super__.constructor.apply(this,arguments)}return s(n,r),n.prototype.draw=function(){var t,s,r,n,i,a,e;for(this.setAnimationFrame(),this.setBackground(),a=this.WIDTH/this.bufferLength*2.5,e=0,n=this.dataArray,i=[],s=0,r=n.length;r>s;s++)t=n[s],this.canvasCtx.fillStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.fillRect(e,this.HEIGHT-t/2,a,t/2),i.push(e+=a+1);return i},n}(Base),this.Dots=function(r){function n(){return this.draw=t(this.draw,this),n.__super__.constructor.apply(this,arguments)}return s(n,r),n.prototype.draw=function(){var t,s,r,n,i,a,e;for(this.setAnimationFrame(),this.setBackground(),a=this.WIDTH/this.bufferLength*2.5,e=0,n=this.dataArray,i=[],s=0,r=n.length;r>s;s++)t=n[s],this.canvasCtx.strokeStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.beginPath(),this.canvasCtx.arc(e,this.HEIGHT-t/2,a/4,0,2*Math.PI),this.canvasCtx.fillStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.fill(),this.canvasCtx.stroke(),i.push(e+=a+1);return i},n}(Base),this.Circle=function(r){function n(){return this.draw=t(this.draw,this),n.__super__.constructor.apply(this,arguments)}return s(n,r),n.prototype.draw=function(){var t,s,r,n,i,a,e;for(this.setAnimationFrame(),this.setBackground(),a=this.WIDTH/this.bufferLength*2.5,e=0,n=this.dataArray,i=[],s=0,r=n.length;r>s;s++)t=n[s],this.canvasCtx.strokeStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.beginPath(),this.canvasCtx.arc(this.WIDTH/2,this.HEIGHT/2,a*t,0,2*Math.PI),this.canvasCtx.fillStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.fill(),this.canvasCtx.lineWidth=4,this.canvasCtx.strokeStyle="#ff6600",this.canvasCtx.stroke(),i.push(e+=a+1);return i},n}(Base)}).call(this);