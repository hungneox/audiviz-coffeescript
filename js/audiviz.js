(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};this.Audiviz=function(){function i(i,e){this.draw=t(this.draw,this),this.canvas=document.querySelector(i),this.player=document.getElementById(e),this.canvasCtx=this.canvas.getContext("2d"),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.WIDTH=this.canvas.width,this.HEIGHT=this.canvas.height}return i.prototype.init=function(){return this.analyser.fftSize=256,this.source=this.audioCtx.createMediaElementSource(this.player),this.source.connect(this.analyser),this.analyser.connect(this.audioCtx.destination),this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength)},i.prototype.draw=function(){var t,i,e,n,a,s,r,h;for(e=requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.canvasCtx.fillStyle="rgb(0, 0, 0)",this.canvasCtx.fillRect(0,0,this.WIDTH,this.HEIGHT),i=this.WIDTH/this.bufferLength*2.5,h=0,s=this.dataArray,r=[],n=0,a=s.length;a>n;n++)t=s[n],this.canvasCtx.fillStyle="rgb("+t+"100,50,50)",this.canvasCtx.fillRect(h,this.HEIGHT-t/2,i,t/2),r.push(h+=i+1);return r},i.prototype.run=function(){return this.player.play(),this.init(),this.draw()},i}()}).call(this);