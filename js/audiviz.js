(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n=function(t,n){function e(){this.constructor=t}for(var i in n)r.call(n,i)&&(t[i]=n[i]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},r={}.hasOwnProperty;this.Audiviz=function(){function t(t,n){this.canvas=document.querySelector(t),this.player=document.getElementById(n)}return t.prototype.draw=function(){var t;return t=new Dots(this.canvas,this.player),t.draw()},t.prototype.run=function(){return this.player.play(),this.draw()},t}(),this.Base=function(){function t(t,n,r,e){null==r&&(r="rgb(0, 0, 0)"),null==e&&(e="rgb(100, 50, 50)"),this.canvasCtx=t.getContext("2d"),this.background=r,this.foreground=e,this.WIDTH=t.width,this.HEIGHT=t.height,this.init(n)}return t.prototype.init=function(t){var n;return n=new(window.AudioContext||window.webkitAudioContext),this.analyser=n.createAnalyser(),this.analyser.fftSize=256,this.analyser.connect(n.destination),this.source=n.createMediaElementSource(t),this.source.connect(this.analyser)},t.prototype.setBackground=function(){return this.canvasCtx.fillStyle=this.background,this.canvasCtx.fillRect(0,0,this.WIDTH,this.HEIGHT)},t.prototype.setAnimationFrame=function(){var t;return t=requestAnimationFrame(this.draw),this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteFrequencyData(this.dataArray)},t}(),this.Bars=function(r){function e(){return this.draw=t(this.draw,this),e.__super__.constructor.apply(this,arguments)}return n(e,r),e.prototype.draw=function(){var t,n,r,e,i,s,a;for(this.setAnimationFrame(),this.setBackground(),n=this.WIDTH/this.bufferLength*2.5,a=0,i=this.dataArray,s=[],r=0,e=i.length;e>r;r++)t=i[r],this.canvasCtx.fillStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.fillRect(a,this.HEIGHT-t/2,n,t/2),s.push(a+=n+1);return s},e}(Base),this.Dots=function(r){function e(){return this.draw=t(this.draw,this),e.__super__.constructor.apply(this,arguments)}return n(e,r),e.prototype.draw=function(){var t,n,r,e,i,s,a;for(this.setAnimationFrame(),this.setBackground(),n=this.WIDTH/this.bufferLength*2.5,a=0,i=this.dataArray,s=[],r=0,e=i.length;e>r;r++)t=i[r],this.canvasCtx.strokeStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.beginPath(),this.canvasCtx.arc(a,this.HEIGHT-t/2,n/4,0,2*Math.PI),this.canvasCtx.fillStyle="rgb("+parseInt(t+100)+",50,50)",this.canvasCtx.fill(),this.canvasCtx.stroke(),s.push(a+=n+1);return s},e}(Base)}).call(this);